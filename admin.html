<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - KSSFK</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>
        <!-- Header / Login Panel -->
        <div style="padding:18px;background:#f8fafc;border-bottom:1px solid #e9eef6;">
            <div style="display:flex;align-items:center;justify-content:space-between;max-width:1100px;margin:0 auto;">
                <div>
                    <h3 style="margin:0;color:#1f2937">KSFP Admin</h3>
                    <small style="color:#6b7280">Admin panel — sign in to continue</small>
                </div>
                                <!-- Dual panels: Admin sign-in (left) and Schools & Parents check-in (right) -->
                                <div style="display:flex; gap:16px;">
                                    <!-- Admin sign-in -->
                                    <div class="login-panel card p-3" style="flex:0 0 420px;">
                                        <h5 class="mb-2" style="margin:0 0 8px 0">Admin Sign in</h5>

                                        <div class="mb-2">
                                                <label class="form-label">Phone number</label>
                                                <input id="login-phone" class="form-control" placeholder="+2547..." />
                                        </div>
                                        <div class="d-flex gap-2 mb-3">
                                                <button id="send-otp-btn" class="btn btn-primary">Send OTP</button>
                                                <input id="otp-input" class="form-control" placeholder="Enter OTP" style="max-width:140px" />
                                                <button id="verify-otp-btn" class="btn btn-success">Verify</button>
                                        </div>

                                        <div class="text-center my-2">or</div>
                                        <div class="d-grid">
                                                <button id="google-login-btn" class="btn btn-outline-dark">Continue with Google</button>
                                        </div>

                                        <div id="login-msg" style="margin-top:12px;font-size:13px;color:#555"></div>
                                    </div>

                                    <!-- Schools & Parents check-in -->
                                    <div class="card p-3" style="flex:1 1 auto; min-width:320px;">
                                        <h5 style="margin:0 0 8px 0">Schools & Parents</h5>
                                        <p style="margin:0 0 8px 0;color:#555">Quick check-in for schools and parents — no admin privileges.</p>

                                        <div class="mb-2">
                                            <label class="form-label">Your name</label>
                                            <input id="sp-name" class="form-control" placeholder="Full name" />
                                        </div>
                                        <div class="mb-2">
                                            <label class="form-label">School / Relationship</label>
                                            <input id="sp-affiliation" class="form-control" placeholder="School name or 'Parent'" />
                                        </div>
                                        <div class="mb-2">
                                            <label class="form-label">Contact (phone or email)</label>
                                            <input id="sp-contact" class="form-control" placeholder="+2547... or email@example.com" />
                                        </div>
                                        <div class="d-flex gap-2">
                                            <button id="sp-checkin" class="btn btn-secondary">Check In</button>
                                            <button id="sp-view-guidelines" class="btn btn-link">Guidelines</button>
                                        </div>

                                        <div id="sp-msg" style="margin-top:12px;font-size:13px;color:#555"></div>
                                    </div>
                                </div>
            </div>
        </div>

    <div class="container-fluid mt-5">
        <div class="row">
            <!-- Sidebar Navigation -->
            <div class="col-md-3">
                <nav class="admin-nav">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#schools" onclick="showTab('schools')">Manage Schools</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#uploads" onclick="showTab('uploads')">Approve Uploads</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#payments" onclick="showTab('payments')">Payment Records</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#penalties" onclick="showTab('penalties')">Penalties & Enforcement</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#analytics" onclick="showTab('analytics')">Analytics</a>
                        </li>
                    </ul>
                </nav>
            </div>

            <!-- Main Content -->
            <div class="col-md-9">
                <!-- Schools Management -->
                <div id="schools" class="tab-content">
                    <h2>School Management</h2>
                    <div id="school-list-container"></div>
                    <button class="btn btn-primary mt-3" onclick="addSchool()">Add New School</button>
                </div>

                <!-- Uploads Approval -->
                <div id="uploads" class="tab-content" style="display:none;">
                    <h2>Approve School Uploads</h2>
                    <div id="uploads-approval-container"></div>
                </div>

                <!-- Payment Records -->
                <div id="payments" class="tab-content" style="display:none;">
                    <h2>Payment Records</h2>
                    <div id="payments-table-container"></div>
                </div>

                <!-- Penalties Enforcement -->
                <div id="penalties" class="tab-content" style="display:none;">
                    <h2>Penalties & Enforcement</h2>
                    <div id="penalties-list-container"></div>
                </div>

                <!-- Analytics -->
                <div id="analytics" class="tab-content" style="display:none;">
                    <h2>Platform Analytics</h2>
                    <div id="admin-analytics-container"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div id="footer-container"></div>

    <script src="lib/jquery.min.js"></script>
    <script src="lib/chart.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/admin.js"></script>
        <script src="js/auth/terms.js"></script>
        <script src="js/auth/login.js"></script>
        <script>
            (function(){
                try{
                    fetch('components/terms-modal.html').then(r=>{ if(r.ok) return r.text(); throw new Error('no modal'); }).then(html=>{
                        const div = document.createElement('div'); div.innerHTML = html; document.body.appendChild(div.firstElementChild);
                        if(window.TermsModal && typeof TermsModal.init === 'function') try{ TermsModal.init(); }catch(e){}
                    }).catch(()=>{});
                }catch(e){}
            })();
        </script>
</body>
</html>
